<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>简介 | 见微前端组件站点</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="见微前端组件站点">
    
    <link rel="preload" href="/assets/css/0.styles.2ddf0d28.css" as="style"><link rel="preload" href="/assets/js/app.a4dcaccd.js" as="script"><link rel="preload" href="/assets/js/4.7a2b8d40.js" as="script"><link rel="preload" href="/assets/js/20.138b0fdd.js" as="script"><link rel="prefetch" href="/assets/js/1.dc6ce136.js"><link rel="prefetch" href="/assets/js/10.2d9f905f.js"><link rel="prefetch" href="/assets/js/11.51016fe7.js"><link rel="prefetch" href="/assets/js/12.35f245b7.js"><link rel="prefetch" href="/assets/js/13.27f2b06e.js"><link rel="prefetch" href="/assets/js/14.822a967d.js"><link rel="prefetch" href="/assets/js/15.47caa127.js"><link rel="prefetch" href="/assets/js/16.97c9c093.js"><link rel="prefetch" href="/assets/js/17.4e07f186.js"><link rel="prefetch" href="/assets/js/18.e940dfe6.js"><link rel="prefetch" href="/assets/js/19.0f7b5ff8.js"><link rel="prefetch" href="/assets/js/2.461047ea.js"><link rel="prefetch" href="/assets/js/21.938cb9c0.js"><link rel="prefetch" href="/assets/js/22.75088837.js"><link rel="prefetch" href="/assets/js/23.6673b3a9.js"><link rel="prefetch" href="/assets/js/24.5ab87905.js"><link rel="prefetch" href="/assets/js/25.bdcc5604.js"><link rel="prefetch" href="/assets/js/26.c5738db8.js"><link rel="prefetch" href="/assets/js/27.c772bb0c.js"><link rel="prefetch" href="/assets/js/28.4021b07c.js"><link rel="prefetch" href="/assets/js/29.0e3b040a.js"><link rel="prefetch" href="/assets/js/30.024cb52f.js"><link rel="prefetch" href="/assets/js/31.c2b792a9.js"><link rel="prefetch" href="/assets/js/32.784a4669.js"><link rel="prefetch" href="/assets/js/5.89d2e075.js"><link rel="prefetch" href="/assets/js/6.cbc4a28d.js"><link rel="prefetch" href="/assets/js/7.dc9ba40b.js"><link rel="prefetch" href="/assets/js/8.d6f2827f.js"><link rel="prefetch" href="/assets/js/9.3ea7846c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.2ddf0d28.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">见微前端组件站点</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="https://git.zjvis.org/nebula-platform/graph-application-components/tree/master/packages/lowcode-index" target="_blank" rel="noopener noreferrer" class="nav-link external">
  代码仓库
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="https://git.zjvis.org/nebula-platform/graph-application-components/tree/master/packages/lowcode-index" target="_blank" rel="noopener noreferrer" class="nav-link external">
  代码仓库
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>组件说明</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/components/GridInteract.html" class="sidebar-link">GridInteract</a></li><li><a href="/pages/components/DivInteractDemo.html" class="sidebar-link">DivInteract</a></li><li><a href="/pages/components/PortalDemo.html" class="sidebar-link">Portal</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>通用表单</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/components/CommonForm.html" aria-current="page" class="active sidebar-link">介绍</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/components/CommonForm.html#简介" class="sidebar-link">简介</a></li><li class="sidebar-sub-header"><a href="/pages/components/CommonForm.html#api" class="sidebar-link">API</a></li></ul></li><li><a href="/pages/components/common-form/DataPath.html" class="sidebar-link">值路径path</a></li><li><a href="/pages/components/common-form/Rules.html" class="sidebar-link">校验规则</a></li><li><a href="/pages/components/common-form/Utils.html" class="sidebar-link">工具函数</a></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>示例</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/components/common-form/LayoutDemo.html" class="sidebar-link">基本用法</a></li><li><a href="/pages/components/common-form/Validate.html" class="sidebar-link">表单校验</a></li><li><a href="/pages/components/common-form/CustomComponent.html" class="sidebar-link">自定义控件</a></li></ul></section></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="简介"><a href="#简介" class="header-anchor">#</a> 简介</h2> <p><code>jw-form</code>，是对<a href="https://1x.antdv.com/docs/vue/introduce-cn/" target="_blank" rel="noopener noreferrer">ant-design-vue@1.7.8<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的基础组件进行封装的通用表单组件。目标是尽可能覆盖实际项目中的表单场景，节省书写重复的template代码，使用更方便的json配置和纯js代码，实现表单数据绑定、表单嵌套、表单联动、表单数据监听等实用功能</p> <div class="custom-block warning"><p class="custom-block-title">注意</p> <p>目前表单最多支持两级嵌套，如果希望支持3级及以上的表单嵌套场景，可以单独沟通下。目前的解法是，将3级及以上的表单部分封装成自定义组件</p></div> <h3 id="antdv插槽组件说明"><a href="#antdv插槽组件说明" class="header-anchor">#</a> antdv插槽组件说明</h3> <h4 id="a-auto-complete"><a href="#a-auto-complete" class="header-anchor">#</a> a-auto-complete</h4> <p>该组件的默认插槽不支持</p> <h2 id="api"><a href="#api" class="header-anchor">#</a> API</h2> <h3 id="jw-form"><a href="#jw-form" class="header-anchor">#</a> jw-form</h3> <table><thead><tr><th style="text-align:left;">属性</th> <th style="text-align:left;">说明</th> <th style="text-align:left;">类型</th> <th style="text-align:left;">required</th> <th style="text-align:left;">默认值</th></tr></thead> <tbody><tr><td style="text-align:left;">v-model</td> <td style="text-align:left;">表单值双向绑定</td> <td style="text-align:left;"><code>object</code></td> <td style="text-align:left;">✅</td> <td style="text-align:left;">空</td></tr> <tr><td style="text-align:left;">formItems</td> <td style="text-align:left;">表单项配置，表单项的具体配置参见下文<code>JwFormItem</code>的说明</td> <td style="text-align:left;"><code>JwFormItem[]</code></td> <td style="text-align:left;">✅</td> <td style="text-align:left;">[]</td></tr> <tr><td style="text-align:left;">size</td> <td style="text-align:left;">表单大小</td> <td style="text-align:left;"><code>large|small|default</code></td> <td style="text-align:left;"></td> <td style="text-align:left;"><code>default</code></td></tr> <tr><td style="text-align:left;">layout</td> <td style="text-align:left;">表单布局，当值形如<code>{lableCol: {}, wrapperCol: {}}</code>，内部会处理成<code>&lt;a-form-model layout=&quot;horizontal&quot; labelCol={layout.labelCol} wrapperCol={layout.wrapperCol} /&gt;</code></td> <td style="text-align:left;"><code>horizontal|vertical|inline|{labelCol: {span: number, offset: number}, wrapperCol: {span: number, offset:number}}</code></td> <td style="text-align:left;"></td> <td style="text-align:left;"><code>horizontal</code></td></tr> <tr><td style="text-align:left;">rules</td> <td style="text-align:left;">表单验证规则，同 <code>a-form-model</code>的rules，多层级的验证规则参照<a href="/pages/components/common-form/Rules.html">详细说明</a></td> <td style="text-align:left;">object</td> <td style="text-align:left;"></td> <td style="text-align:left;">空</td></tr> <tr><td style="text-align:left;">injectComponents</td> <td style="text-align:left;">自定义表单控件的映射</td> <td style="text-align:left;"><code>object</code></td> <td style="text-align:left;"></td> <td style="text-align:left;">空</td></tr> <tr><td style="text-align:left;">injectSlotSetting</td> <td style="text-align:left;">自定义表单控件的插槽描述</td> <td style="text-align:left;"><code>array</code></td> <td style="text-align:left;"></td> <td style="text-align:left;">空</td></tr> <tr><td style="text-align:left;">watchConfig</td> <td style="text-align:left;">监听表单值变化配置，用于表单联动场景，类似于Vue组件选项配置里的watch属性，但仍有区别，详细介绍见下文</td> <td style="text-align:left;"><code>object</code></td> <td style="text-align:left;"></td> <td style="text-align:left;">空</td></tr></tbody></table> <h4 id="injectcomponents"><a href="#injectcomponents" class="header-anchor">#</a> injectComponents</h4> <p>通过该属性注入自定义表单控件</p> <p>示例如下：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>jw-form</span> <span class="token attr-name">:formItems</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>formItems<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>formData<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:injectComponents</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>injectComponents<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> CustomComponent <span class="token keyword">from</span> <span class="token string">'./components/CustomComponent.vue'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">formData</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">injectComponents</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">'test-component'</span><span class="token operator">:</span> CustomComponent
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">formItems</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'test-component'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">'test'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'自定义'</span>
      <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h4 id="injectslotsetting"><a href="#injectslotsetting" class="header-anchor">#</a> injectSlotSetting</h4> <p>自定义表单控件的插槽说明，<code>jw-form</code>内部在实现插槽透传给自定义表单控件时，需要提前知晓控件支持哪些插槽，示例如下：</p> <p>假设自定义表单控件<code>test-component</code>有如下插槽：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>before<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>lalala<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>default<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>after<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p>那么injectSlotSetting写法如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> injectSlotSetting <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
  <span class="token literal-property property">componentName</span><span class="token operator">:</span> <span class="token string">'test-component'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">slots</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 键是插槽名</span>
    <span class="token literal-property property">before</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">after</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 如果控件支持默认插槽，那么需要指定hasDefaultSlot等于true</span>
  <span class="token literal-property property">hasDefaultSlot</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre></div><h4 id="watchconfig"><a href="#watchconfig" class="header-anchor">#</a> watchConfig</h4> <p><strong>类型</strong>：<code>{[key: string]: Function | Object}</code></p> <p><strong>详细</strong>：一个对象，键是需要监听的表达式，值是对应的回调函数或者一个对象。其中键需要是合法的路径</p> <p><strong>合法的键路径</strong>:</p> <ul><li><code>x</code></li> <li><code>x.1.y</code>: 表示监听x字段下数组第一项的y字段</li> <li><code>x[].y</code>： 表示监听x字段下所有数组项的y字段</li></ul> <p><strong>回调函数的参数</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">(</span>value<span class="token operator">:</span> any<span class="token punctuation">,</span> <span class="token literal-property property">oldValue</span><span class="token operator">:</span> any<span class="token punctuation">,</span> <span class="token literal-property property">other</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token comment">// 表单控件的配置对象</span>
  <span class="token literal-property property">item</span><span class="token operator">:</span> JwFormItem<span class="token punctuation">,</span> 
  <span class="token comment">// 表单控件最新的值</span>
  <span class="token literal-property property">value</span><span class="token operator">:</span> any<span class="token punctuation">,</span> 
  <span class="token comment">// 表单控件的旧值</span>
  <span class="token literal-property property">oldValue</span><span class="token operator">:</span> any<span class="token punctuation">,</span> 
  <span class="token comment">// 表单控件对应的字段名</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> string<span class="token punctuation">,</span> 
  <span class="token comment">// 表单控件所处的键路径，例如： x.1.y</span>
  <span class="token literal-property property">path</span><span class="token operator">:</span> string<span class="token punctuation">,</span> 
  <span class="token comment">// 如果表单控件的父节点是jw-loop-items，那么parentValue表示表单控件所在数组项的对象，例如：x.1，否则parentValue是整个表单的值</span>
  <span class="token literal-property property">parentValue</span><span class="token operator">:</span> object
  <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><p><strong>示例</strong></p> <p>支持以下几种写法</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> watchConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
  
  <span class="token function-variable function">x</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> oldValue<span class="token punctuation">,</span> other</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 对象形式，handler表示回调函数，deep等于true，表示x下任何属性变更(包括数组类型的新增/删除)时都会被调用，不论嵌套多深</span>
  <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">handler</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> oldValue<span class="token punctuation">,</span> other</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">deep</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// x字段下所有数组项的y字段有变更都会被调用</span>
  <span class="token string-property property">'x[].y'</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> oldValue<span class="token punctuation">,</span> other</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// x[1]的y字段有变更时会被调用</span>
  <span class="token string-property property">'x.1.y'</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> oldValue<span class="token punctuation">,</span> other</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="键路径"><a href="#键路径" class="header-anchor">#</a> 键路径</h4> <p><a href="/pages/components/common-form/DataPath.html">查看详细说明</a></p> <h3 id="事件"><a href="#事件" class="header-anchor">#</a> 事件</h3> <table><thead><tr><th style="text-align:left;">事件名称</th> <th style="text-align:left;">说明</th> <th style="text-align:left;">回调参数</th></tr></thead> <tbody><tr><td style="text-align:left;">change</td> <td style="text-align:left;">表单数据变更后触发</td> <td style="text-align:left;">Function(newValue: object)</td></tr> <tr><td style="text-align:left;">itemChange</td> <td style="text-align:left;">表单项数据变更后触发</td> <td style="text-align:left;">Function(itemConfig: object})</td></tr></tbody></table> <h4 id="itemchange"><a href="#itemchange" class="header-anchor">#</a> itemChange</h4> <p>回调参数itemConfig类型如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">itemConfig</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token comment">// 表单项对应的formItem对象</span>
  <span class="token literal-property property">item</span><span class="token operator">:</span> JwFormItem
  <span class="token comment">// 表单项最新的值</span>
  <span class="token literal-property property">value</span><span class="token operator">:</span> any
  <span class="token comment">// 表单项变更前的值</span>
  <span class="token literal-property property">oldValue</span><span class="token operator">:</span> any
  <span class="token comment">// 对应该表单项的表单字段，formItem.key</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> string
  <span class="token comment">// 表单项对应的键路径，键路径说明参照目录</span>
  <span class="token literal-property property">path</span><span class="token operator">:</span> string
<span class="token punctuation">}</span>
</code></pre></div><h3 id="方法"><a href="#方法" class="header-anchor">#</a> 方法</h3> <h4 id="validate"><a href="#validate" class="header-anchor">#</a> validate</h4> <p>对整个表单进行校验，函数执行返回一个promise，如果校验成功，将进入promise的成功回调，否则进入promise的失败回调，成功回调的参数是表单值</p> <h3 id="jwformitem"><a href="#jwformitem" class="header-anchor">#</a> JwFormItem</h3> <table><thead><tr><th style="text-align:left;">属性</th> <th style="text-align:left;">说明</th> <th style="text-align:left;">类型</th> <th style="text-align:left;">required</th> <th style="text-align:left;">默认值</th></tr></thead> <tbody><tr><td style="text-align:left;">type</td> <td style="text-align:left;">表单控件名，可以是全局注入的组件(例如：antdv的组件<code>a-input</code>等输入型组件)或者通过<code>injectComponents</code>传入的自定义表单控件名称</td> <td style="text-align:left;"><code>string</code></td> <td style="text-align:left;">✅</td> <td style="text-align:left;">空</td></tr> <tr><td style="text-align:left;">key</td> <td style="text-align:left;">表单字段，命名格式要求遵守驼峰命名规则</td> <td style="text-align:left;"><code>string</code></td> <td style="text-align:left;">✅</td> <td style="text-align:left;">空</td></tr> <tr><td style="text-align:left;">name</td> <td style="text-align:left;">标签文本</td> <td style="text-align:left;"><code>string</code></td> <td style="text-align:left;"></td> <td style="text-align:left;">空</td></tr> <tr><td style="text-align:left;">props</td> <td style="text-align:left;">所有<code>props</code>的属性都会透传给表单控件</td> <td style="text-align:left;"><code>object</code></td> <td style="text-align:left;"></td> <td style="text-align:left;">空</td></tr> <tr><td style="text-align:left;">formItemProps</td> <td style="text-align:left;">所有<code>formItemProps</code>的属性都会透传给<code>a-form-model-item</code>组件</td> <td style="text-align:left;"><code>object</code></td> <td style="text-align:left;"></td> <td style="text-align:left;">空</td></tr> <tr><td style="text-align:left;">interactionVisibleHidden</td> <td style="text-align:left;">表单控件是否隐藏</td> <td style="text-align:left;"><code>boolean</code></td> <td style="text-align:left;"></td> <td style="text-align:left;"><code>false</code></td></tr> <tr><td style="text-align:left;">showFunc</td> <td style="text-align:left;">表单控件是否展示，除了可以使用<code>interactionVisibleHidden</code>之外，还可以传入函数，如果函数的执行返回等于true，将展示该表单项，否则将不展示</td> <td style="text-align:left;"><code>function</code></td> <td style="text-align:left;"></td> <td style="text-align:left;">空</td></tr> <tr><td style="text-align:left;">groupToggleHide</td> <td style="text-align:left;">适用于表单分组场景，当前分组是否收起</td> <td style="text-align:left;"><code>boolean</code></td> <td style="text-align:left;"></td> <td style="text-align:left;"><code>false</code></td></tr> <tr><td style="text-align:left;">visibleHidden</td> <td style="text-align:left;">适用于表单分组场景，当前分组下的所有表单控件是否隐藏</td> <td style="text-align:left;"><code>boolean</code></td> <td style="text-align:left;"></td> <td style="text-align:left;"><code>false</code></td></tr> <tr><td style="text-align:left;">subText</td> <td style="text-align:left;">后缀文本</td> <td style="text-align:left;"><code>string</code></td> <td style="text-align:left;">false</td> <td style="text-align:left;">空</td></tr> <tr><td style="text-align:left;">subSlot</td> <td style="text-align:left;">表单控件后缀插槽是否展示，如果展示，插槽的名称是<code>sub_${item.key}</code></td> <td style="text-align:left;"><code>boolean</code></td> <td style="text-align:left;"></td> <td style="text-align:left;"><code>false</code></td></tr> <tr><td style="text-align:left;">isSlot</td> <td style="text-align:left;">非表单控件的UI，可以通过插槽形式传入渲染展示，插槽的名称是<code>${item.key}</code>，插槽的作用域<code>{name, formItem, value}</code></td> <td style="text-align:left;"><code>boolean</code></td> <td style="text-align:left;"></td> <td style="text-align:left;"><code>false</code></td></tr> <tr><td style="text-align:left;">listener</td> <td style="text-align:left;">表单控件的监听事件对象，例如： <code>{click: () =&gt; {}, change: () =&gt; {}, focus: () =&gt; {}}</code>，内部通过<code>v-on</code>透传给表单控件, 事件响应参数说明见下文</td> <td style="text-align:left;"><code>object</code></td> <td style="text-align:left;"></td> <td style="text-align:left;">空</td></tr> <tr><td style="text-align:left;">eventChangePaseType</td> <td style="text-align:left;">控件change事件回调返回参数的解析方式，比如<code>a-input</code>的change事件传回的是event，通过event.target.value取值，<code>a-checkbox</code>的change事件，通过event.target.checked取值，详细说明见下文</td> <td style="text-align:left;"><code>origin | event | eventCheck</code></td> <td style="text-align:left;"></td> <td style="text-align:left;">origin</td></tr> <tr><td style="text-align:left;">withBr</td> <td style="text-align:left;">是否在表单控件后增加换行，适用于表单layout是inline的场景</td> <td style="text-align:left;"><code>boolean</code></td> <td style="text-align:left;"></td> <td style="text-align:left;"><code>false</code></td></tr> <tr><td style="text-align:left;">options</td> <td style="text-align:left;">可选项，适用于<code>a-select</code>和<code>jw-select</code></td> <td style="text-align:left;"><code>[{label: '选项标签文案', value: 1}]</code></td> <td style="text-align:left;"></td> <td style="text-align:left;">空</td></tr> <tr><td style="text-align:left;">optionsFunc</td> <td style="text-align:left;">适用于<code>jw-select</code>，函数执行返回可选项, 用于动态获取可选项，示例见下文</td> <td style="text-align:left;"><code>function</code></td> <td style="text-align:left;"></td> <td style="text-align:left;">空</td></tr> <tr><td style="text-align:left;">children</td> <td style="text-align:left;">子控件配置数组，适用于<code>js-loop-items</code>和<code>groupToggle</code></td> <td style="text-align:left;"><code>JwFormItem[]</code></td> <td style="text-align:left;"></td> <td style="text-align:left;">空</td></tr> <tr><td style="text-align:left;">rules</td> <td style="text-align:left;">校验规则，适用于<code>js-loop-items</code>，表示子表单的校验规则</td> <td style="text-align:left;"><code>object</code></td> <td style="text-align:left;"></td> <td style="text-align:left;">空</td></tr></tbody></table> <h3 id="工具函数"><a href="#工具函数" class="header-anchor">#</a> 工具函数</h3> <p>npm包<code>@zjlabvis/common-form</code>导出了一些比较常用的工具函数</p> <ul><li>toPath：将路径格式的字符串转换成数组形式</li> <li>setValueByPath：根据键路径修改表单属性值，内部会转换成响应式数据</li> <li>getValueByPath：根据键路径获取表单属性值</li> <li>getFormItemByPath： 根据键路径获取表单控件配置对象</li> <li>setFormItemByPath：根据键路径修改表单控件配置对象</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/pages/components/PortalDemo.html" class="prev">
        Portal
      </a></span> <span class="next"><a href="/pages/components/common-form/DataPath.html">
        值路径path
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.a4dcaccd.js" defer></script><script src="/assets/js/4.7a2b8d40.js" defer></script><script src="/assets/js/20.138b0fdd.js" defer></script>
  </body>
</html>
